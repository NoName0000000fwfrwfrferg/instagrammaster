"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7774],{47774:function(e,t,i){i.r(t),i.d(t,{default:function(){return eJ}});var s=i(85893),l=i(59635),n=i(50067),a=i(37159),r=i(65222),o=i(21540),d=i(67294),p=i(2664),c=i(25800),h=i(79742),u=i(53008),g=i(50795),j=i(21207),x=i(82169),m=i(87111),v=i(85700),b=i(36741),y=i(76257),f=i(41138);let Z=d.forwardRef(function(e,t){return(0,s.jsx)(g.Z,{direction:"down",ref:t,...e})});var C=e=>{let t=(0,p.I0)(),i=(0,p.v9)(e=>e.user.editorFontSize)||14,l=(0,p.v9)(e=>e.user.editorDisableAutoComplete)||!1;return(0,s.jsxs)(j.Z,{fullWidth:!0,maxWidth:"sm",onClose:()=>{e.onClose()},TransitionComponent:Z,open:e.open,children:[(0,s.jsxs)(r.Z,{container:!0,style:{paddingLeft:20,paddingRight:20,marginTop:20},children:[(0,s.jsxs)(x.Z,{variant:"h6",component:"h1",gutterBottom:!0,color:"secondary",children:[" ","Editor Settings"," "]}),(0,s.jsx)("br",{}),(0,s.jsx)(m.Z,{}),(0,s.jsx)("br",{}),(0,s.jsx)(v.Z,{id:"outlined-multiline-flexible",style:{padding:10},required:!0,size:"small",type:"number",margin:"normal",variant:"outlined",inputProps:{min:"8",max:"32"},label:"Font Size (8-32)",fullWidth:!0,value:i,onChange:e=>t((0,f.Ab)(e.target.value))}),(0,s.jsx)(b.Z,{labelPlacement:"start",control:(0,s.jsx)(y.Z,{checked:l,onChange:e=>t((0,f.Fl)(e.target.checked)),name:"autoCompleteToggle",color:"primary"}),label:"Disable Code Autocomplete/ Suggestions"})]}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]})},O=i(26130),w=i(77563),k=i(14327),S=i(61737),T=i(77190),I=i(45697),F=i.n(I);i(64030);let P=d.forwardRef(function(e,t){return(0,s.jsx)(g.Z,{direction:"down",ref:t,...e})});class N extends d.Component{render(){let{classes:e}=this.props,{onClose:t,selectedValue:i,...n}=this.props,{value:a}=this.state,o=[];return this.props.availableLanguages?this.props.availableLanguages.length:Object.values(c).filter(e=>e.active).length,["Programming","Web","Database","Tool"].map(e=>{o.push({languageType:e,languageTitle:"Tool"===e?"Tools":"".concat(e," languages"),languagesAvailable:this.languageOptionsByType(e.toLowerCase(),this.props.availableLanguages)})}),(0,s.jsx)(j.Z,{fullWidth:!0,maxWidth:"md",onClose:this.handleClose,TransitionComponent:P,open:this.props.open,children:0===a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,{container:!0,direction:"row",justifyContent:"flex-end",alignItems:"flex-start",children:(0,s.jsx)(r.Z,{item:!0,xs:12,md:4,children:(0,s.jsxs)(l.Z,{className:"".concat(e.paper," oc-card"),elevation:0,children:[(0,s.jsx)(O.Z,{size:"small",onChange:e=>this.setState({searchString:e.target.value}),value:this.state.searchString,className:e.input,placeholder:"Search languages...",inputProps:{"aria-label":"Search languages"}}),this.state.searchString?(0,s.jsx)(w.Z,{className:e.iconButton,"aria-label":"search",onClick:e=>this.setState({searchString:""}),children:(0,s.jsx)(k.Z,{})}):(0,s.jsx)(w.Z,{className:e.iconButton,"aria-label":"search",children:(0,s.jsx)(T.Z,{})})]})})}),(0,s.jsxs)(r.Z,{container:!0,style:{paddingLeft:20,paddingRight:20},children:[o.map(t=>(0,s.jsx)(r.Z,{item:!0,container:!0,direction:"row",children:0!=t.languagesAvailable.length&&(0,s.jsxs)("div",{style:{width:"100%"},children:[(0,s.jsxs)(x.Z,{variant:"h6",component:"h1",gutterBottom:!0,color:"secondary",children:[" ",t.languageTitle," "]}),(0,s.jsx)(m.Z,{}),(0,s.jsx)(r.Z,{container:!0,children:t.languagesAvailable.map(t=>{let i=c[t];return"home"!==this.props.source&&i.beta?null:i.properties&&i.properties.url?(0,s.jsx)(r.Z,{item:!0,sm:6,md:3,lg:3,className:e.selectionOptions,children:(0,s.jsx)("a",{href:i.properties.url,target:"_blank",children:(0,s.jsx)(x.Z,{variant:"subtitle1",component:"h2",children:(0,s.jsxs)("div",{className:e.titleWithLink,children:[i.name,(0,s.jsx)(S.Z,{})]})})})},t):(0,s.jsx)(r.Z,{item:!0,sm:6,md:3,lg:3,className:e.selectionOptions,onClick:e=>this.props.handleListItemClick(t),children:(0,s.jsx)("a",{children:(0,s.jsxs)("div",{className:e.titleWithLink,children:[(0,s.jsx)(x.Z,{variant:"subtitle1",component:"h2",color:"primary",children:i.name}),i.beta&&(0,s.jsx)(S.Z,{fontSize:"small",className:"ml5",color:"primary"})]})})},t)})}),(0,s.jsx)("br",{})]})},t.languageType)),"home"===this.props.source&&!1]})]})})}constructor(...e){super(...e),this.state={value:0,searchString:""},this.handleChange=(e,t)=>{this.setState({value:t})},this.handleClose=()=>{this.props.onClose()},this.languageOptionsByType=(e,t)=>{let i="";return this.state.searchString&&(i=Object.keys(c).filter(e=>e.toLowerCase().includes(this.state.searchString.toLowerCase())||c[e].name.toLowerCase().includes(this.state.searchString.toLowerCase()))),(i||Object.keys(c)).filter(e=>c[e].active).filter(t=>c[t].languageType===e).filter(e=>!t||!!t.includes(e))}}}N.propTypes={onClose:F().func,selectedValue:F().string};var U=(0,o.Z)(e=>({selectionOptions:{cursor:"pointer",padding:5,borderRadius:5,"&:hover":{backgroundColor:"dark"===e.palette.type?e.palette.grey[800]:e.palette.grey[300]}},paper:{marginRight:e.spacing(4),display:"flex",alignItems:"center",marginTop:e.spacing(2),marginBottom:0},input:{marginLeft:e.spacing(3),flex:1},iconButton:{padding:10},titleWithLink:{display:"flex",alignItems:"center"}}))(N),L=i(96752),M=i(76474),R=e=>{let{codeObj:t}=e;return(0,s.jsx)("div",{style:{paddingTop:2,paddingRight:2,float:"right"},children:(0,s.jsxs)(x.Z,{variant:"caption",gutterBottom:!0,children:[(0,s.jsxs)("span",{itemProp:"datePublished",dateTime:"".concat(new Date(t.updated).toISOString().split("T")[0]),children:["created ".concat((0,L.Z)(new Date(t.created),{max:1,suffix:!0}))," "]}),t.user&&t.user.name&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:" by "}),(0,s.jsx)(M.Link,{route:"/users/".concat(t.user._id),children:(0,s.jsx)("span",{children:(0,s.jsx)("span",{itemProp:"author",itemScope:!0,itemType:"http://schema.org/Person",children:(0,s.jsx)("span",{itemProp:"name",children:"".concat(t.user.name)})})})})]})]})})},E=i(68452),z=i(76064),W=i(41852),_=i(39856);let V=d.forwardRef(function(e,t){return(0,s.jsx)(g.Z,{direction:"down",ref:t,...e})});var A=e=>{let{open:t,handleClose:i,codeObj:l,handleUpdate:n,visibility:a,token:r,handleSave:o}=e;return(0,s.jsxs)(j.Z,{open:t,TransitionComponent:V,fullWidth:!0,maxWidth:"md",onClose:i,children:[(0,s.jsx)(E.Z,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Z,{id:"outlined-name",label:"Name",style:{width:"100%"},margin:"normal",variant:"outlined",value:l.title,onChange:e=>n("title",e.target.value)}),(0,s.jsx)("br",{}),(0,s.jsx)(v.Z,{id:"outlined-multiline-flexible",fullWidth:!0,label:"Description",multiline:!0,rows:"4",rowsMax:"20",margin:"normal",variant:"outlined",value:l.description||"",onChange:e=>n("description",e.target.value)}),(0,s.jsx)("br",{}),(0,s.jsx)(v.Z,{id:"outlined-tags",label:"Tags",margin:"normal",variant:"outlined",style:{width:"100%"},value:l.tags?l.tags.join(", "):"",onChange:e=>{let t=e.target.value;t?n("tags",t.split(",").map(e=>e.trim().toLowerCase())):n("tags",[])}}),!a&&r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(_.Z,{value:l.visibility||"public",onChange:e=>n("visibility",e)})]})]})}),(0,s.jsxs)(z.Z,{children:[(0,s.jsx)(W.Z,{variant:"outlined",size:"small",color:"secondary",onClick:i,children:"Close"}),"\xa0\xa0",(0,s.jsx)(W.Z,{variant:"outlined",size:"small",color:"primary",onClick:e=>{o()},children:"Save"})]})]})},B=e=>{var t,i,n,a,o;let{codeObj:d}=e;return(0,s.jsx)(r.Z,{container:!0,children:(0,s.jsx)(r.Z,{item:!0,xs:12,children:(0,s.jsx)(l.Z,{variant:"outlined",style:{padding:"8px",overflow:"auto",maxHeight:"calc(100vh - 110px)"},children:(0,s.jsxs)("pre",{children:[" ",(null==d?void 0:null===(i=d.properties)||void 0===i?void 0:null===(t=i.files)||void 0===t?void 0:t.length)>0?null==d?void 0:null===(o=d.properties)||void 0===o?void 0:null===(a=o.files)||void 0===a?void 0:null===(n=a[0])||void 0===n?void 0:n.content:""," "]})})})})},D=i(68693),H=i(94158),G=i(78481),J=i(12332),K=i(52978),Y=i(83731),q=i(97777),$=i(10124),Q=i(12563),X=i(59795),ee=i(65189),et=i(19861),ei=i(98615),es=i(41800),el=i(76490),en=i(8936),ea=i(58533),er=i(77433);let eo=(0,J.Z)(e=>({drawer:{width:500,maxWidth:"100%"},msgAdd:{backgroundColor:e.palette.background.default,display:"flex",alignItems:"center",padding:e.spacing(1,2)}}));function ed(e){let t=eo(),[i,n]=(0,d.useState)("");(0,p.v9)(e=>e.user);let a=async()=>{i&&""!=i&&(e.sendMessage(i),n(""))};return(0,s.jsxs)(s.Fragment,{children:[!e.userToken&&(0,s.jsx)(en.Z,{action:(0,s.jsx)(W.Z,{color:"inherit",size:"small",onClick:()=>{window.open("/login","_blank")},children:"Login"}),severity:"warning",children:"Please login to interact with the AI"}),(0,s.jsxs)("div",{className:t.msgAdd,children:[(0,s.jsx)(l.Z,{variant:"outlined",component:ee.Z,flexGrow:1,ml:2,p:1,children:(0,s.jsx)(et.Z,{disabled:!e.userToken,className:t.input,disableUnderline:!0,fullWidth:!0,value:i,onChange:e=>{e.persist(),n(e.target.value)},onKeyUp:e=>{13===e.keyCode&&a()},placeholder:"Leave a message"})}),(0,s.jsx)(D.ZP,{title:"Send",children:(0,s.jsx)("span",{children:(0,s.jsx)(w.Z,{color:"primary",disabled:!i,onClick:a,children:(0,s.jsx)(ei.Z,{fontSize:"small",children:(0,s.jsx)(el.Z,{})})})})})]})]})}var ep=e=>{let t=eo(),i=(0,p.I0)(),[l,a]=d.useState([]),[r,o]=(0,d.useState)(!1),{token:c,plan:h}=(0,p.v9)(e=>e.user),g=(0,d.useRef)(null);async function j(t){var i,s,n,r,o,d,p,h;if((null==t?void 0:t.length)>2e3)return alert("Message is too long. Please keep it under 2000 characters.");a(e=>[...e,{content:t,role:"user"}]);let{json:g,error:j,statusCode:x}=await (0,u.Wn)("/api/ai",c,{module:"editor",usecase:"codeHelp",currentMessage:t,conversation:l,metadata:{language:null===(s=e.codeObj)||void 0===s?void 0:null===(i=s.properties)||void 0===i?void 0:i.language,files:null===(r=e.codeObj)||void 0===r?void 0:null===(n=r.properties)||void 0===n?void 0:n.files,stdin:null===(d=e.codeObj)||void 0===d?void 0:null===(o=d.properties)||void 0===o?void 0:o.stdin,stdout:null===(h=e.codeObj)||void 0===h?void 0:null===(p=h.properties)||void 0===p?void 0:p.stdout}});x<400&&g?(null==g?void 0:g.message)?a(e=>[...e,g.message]):(console.log("error:",g),alert("Something went wrong. Message:"+JSON.stringify(g))):(console.log("error:",j),alert("Error: "+j))}(0,d.useEffect)(()=>{g.current&&g.current.scrollIntoView({behavior:"smooth"})},[l]);let v=()=>{o(!1)},b=()=>{window.open("/pricing","_blank")};return(0,s.jsxs)(n.Z,{children:[(0,s.jsx)(D.ZP,{title:"AI Help",children:(0,s.jsx)("button",{onClick:()=>{o(!0),c&&!h&&i((0,f.Bw)(c))},style:{background:"#2ecc71",color:"white",border:"none",borderRadius:5,padding:4,marginRight:4,marginTop:3,cursor:"pointer"},children:(0,s.jsxs)("span",{style:{marginLeft:1,marginRight:4},children:[(0,s.jsx)("img",{src:"/static/images/work/ai4.png",alt:"AI",style:{width:12,height:12}})," "," AI "]})})}),(0,s.jsxs)(X.ZP,{anchor:"right",classes:{paper:t.drawer},ModalProps:{BackdropProps:{invisible:!0}},onClose:v,open:r,variant:"temporary",children:[(0,s.jsx)(ee.Z,{p:1,style:{paddingLeft:15},children:(0,s.jsxs)(ee.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,s.jsx)(x.Z,{variant:"h6",color:"textPrimary",children:"Editor AI"}),(0,s.jsxs)("div",{children:[!h&&(0,s.jsx)(W.Z,{size:"small",color:"primary",onClick:b,disabled:!c,children:"Upgrade"}),(0,s.jsx)(w.Z,{onClick:v,children:(0,s.jsx)(es.Z,{})})]})]})}),(0,s.jsx)(m.Z,{}),(0,s.jsx)("div",{id:"scrollableDiv",style:{height:"calc(100vh - 40px)",overflow:"auto",display:"flex",flexDirection:"column-reverse"},children:(0,s.jsx)(ee.Z,{flexGrow:1,p:2,children:(0,s.jsxs)(ea.Z,{dataLength:l.length,inverse:!1,style:{display:"flex",flexDirection:"column"},hasMore:!1,scrollableTarget:"scrollableDiv",children:[l.length>0&&l.map((e,t)=>{var i;return(0,s.jsxs)("div",{children:[(0,s.jsx)(er.Z,{markdown:null==e?void 0:e.content}),(null==e?void 0:null===(i=e.content)||void 0===i?void 0:i.startsWith("You have reached the daily limit"))&&(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"1rem"},children:(0,s.jsx)(W.Z,{size:"small",color:"primary",onClick:b,style:{paddingRight:"25px"},children:"Upgrade"})})]},t)}),(0,s.jsx)("div",{ref:g})]})})}),(0,s.jsx)(m.Z,{}),(0,s.jsx)(ed,{sendMessage:j,userToken:c})]})]})};let ec=(0,J.Z)(e=>({drawer:{width:500,maxWidth:"100%"},icon:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},item:{cursor:"pointer"},msgAdd:{backgroundColor:e.palette.background.default,display:"flex",alignItems:"center",padding:e.spacing(1,2)},paper:{padding:"2px 4px",display:"flex",alignItems:"center",marginTop:e.spacing(1),marginBottom:e.spacing(3)},messages:{padding:e.spacing(3)}}));function eh(e){let t=ec(),[i,n]=(0,d.useState)("");(0,p.v9)(e=>e.user);let a=async()=>{i&&""!=i&&(e.sendMessage(i),n(""))};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:t.msgAdd,children:[(0,s.jsx)(l.Z,{variant:"outlined",component:ee.Z,flexGrow:1,ml:2,p:1,children:(0,s.jsx)(et.Z,{className:t.input,disableUnderline:!0,fullWidth:!0,value:i,onChange:e=>{e.persist(),n(e.target.value)},onKeyUp:e=>{13===e.keyCode&&a()},placeholder:"Leave a message"})}),(0,s.jsx)(D.ZP,{title:"Send",children:(0,s.jsx)("span",{children:(0,s.jsx)(w.Z,{color:"primary",disabled:!i,onClick:a,children:(0,s.jsx)(ei.Z,{fontSize:"small",children:(0,s.jsx)(el.Z,{})})})})})]})})}var eu=e=>{let t=ec(),[i,l]=d.useState([]),[a,r]=(0,d.useState)(!1),o=(0,p.v9)(e=>e.user.token);async function c(t){var s,n,a,r,d,p,c,h;console.log("sending message:",t),l(e=>[...e,{content:t,role:"user"}]);let{json:g,error:j,statusCode:x}=await (0,u.Wn)("/api/ai",o,{module:"editor",usecase:"codeHelpEmbedded",currentMessage:t,conversation:i,metadata:{language:null===(n=e.codeObj)||void 0===n?void 0:null===(s=n.properties)||void 0===s?void 0:s.language,files:null===(r=e.codeObj)||void 0===r?void 0:null===(a=r.properties)||void 0===a?void 0:a.files,stdin:null===(p=e.codeObj)||void 0===p?void 0:null===(d=p.properties)||void 0===d?void 0:d.stdin,stdout:null===(h=e.codeObj)||void 0===h?void 0:null===(c=h.properties)||void 0===c?void 0:c.stdout}});x<400&&g?(null==g?void 0:g.message)?l(e=>[...e,g.message]):(console.log("error:",g),alert("Something went wrong. Message:"+JSON.stringify(g))):(console.log("error:",j),alert("Error: "+j))}(0,p.v9)(e=>e.user.orgs);let h=()=>{r(!1)};return(0,s.jsxs)(n.Z,{children:[(0,s.jsx)(D.ZP,{title:"AI Help",children:(0,s.jsx)("button",{onClick:()=>{r(!0)},style:{background:"#2ecc71",color:"white",border:"none",borderRadius:5,padding:4,marginRight:4,marginTop:3,cursor:"pointer"},children:(0,s.jsxs)("span",{style:{marginLeft:1,marginRight:4},children:[(0,s.jsx)("img",{src:"/static/images/work/ai4.png",alt:"AI",style:{width:12,height:12}})," "," AI "]})})}),(0,s.jsxs)(X.ZP,{anchor:"right",classes:{paper:t.drawer},ModalProps:{BackdropProps:{invisible:!0}},onClose:h,open:a,variant:"temporary",children:[(0,s.jsx)(ee.Z,{p:1,style:{paddingLeft:15},children:(0,s.jsxs)(ee.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,s.jsx)(x.Z,{variant:"h6",color:"textPrimary",children:"Ask AI"}),(0,s.jsx)(w.Z,{onClick:h,children:(0,s.jsx)(es.Z,{})})]})}),(0,s.jsx)(m.Z,{}),(0,s.jsx)("div",{id:"scrollableDiv",style:{height:"calc(100vh - 40px)",overflow:"auto",display:"flex",flexDirection:"column-reverse"},children:(0,s.jsx)(ee.Z,{flexGrow:1,p:2,children:(0,s.jsx)(ea.Z,{dataLength:i.length,inverse:!1,style:{display:"flex",flexDirection:"column"},hasMore:!1,scrollableTarget:"scrollableDiv",children:i.length>0&&i.map(e=>(0,s.jsx)("div",{children:(0,s.jsx)(er.Z,{markdown:null==e?void 0:e.content})}))})})}),(0,s.jsx)(m.Z,{}),(0,s.jsx)(eh,{sendMessage:c,userToken:o})]})]})},eg=i(63644);let ej=(0,J.Z)(e=>({mobileSelectionPanelGroup:{display:"inline",marginRight:10,border:"1px solid #ccc",padding:"3.9px 5px",paddingBottom:8,borderRadius:4,background:"linear-gradient(to right, ".concat("dark"===e.palette.type?e.palette.grey[700]:e.palette.grey[300]," 50%, transparent 50%)")},mobileSelectionPanelGroupRightFill:{background:"linear-gradient(to left, ".concat("dark"===e.palette.type?e.palette.grey[700]:e.palette.grey[300]," 50%, transparent 50%)")},mobileSelectionPanel:{color:e.palette.text.secondary,borderRadius:0}}));var ex=e=>{let{codeObj:t,embed:i,running:l,showAi:r,source:o,hideNew:p,handleNewClick:c,hideLanguageSelection:u,handleLanguageModelOpen:g,codeVsConsoleSwitchValue:j,hideRun:x,handleRunClick:m,hideEditorOptions:v,handleEditorSettingsOpen:b,handleClearOutput:y,handleCodeMetaEdit:f,fullscreen:Z,switchFullscreen:C,handleCodeVsConsoleSwitch:O}=e,k=ej();return(0,s.jsxs)(n.Z,{children:[r&&(0,s.jsx)(eu,{codeObj:t}),"home"===o&&(0,s.jsx)(ep,{codeObj:t}),!0!==p&&(0,s.jsxs)(a.Z,{xsDown:!0,children:[(0,s.jsx)(D.ZP,{title:"Create a new ".concat(t.properties.language.toUpperCase()," program"),children:(0,s.jsx)(W.Z,{color:"primary",size:"small",onClick:e=>c(t.properties.language),children:"New"})}),"\xa0\xa0\xa0"]}),!0!==u&&(0,s.jsx)(a.Z,{xsDown:!0,children:(0,s.jsx)(D.ZP,{title:"Click to change the language",children:(0,s.jsxs)(W.Z,{size:"small",variant:"contained",color:"primary",className:"mr10",onClick:e=>{g()},children:[t.properties.language," ",(0,s.jsx)(q.Z,{})]})})}),(0,s.jsx)(a.Z,{smUp:!0,children:(0,s.jsxs)("div",{className:"code"===j?k.mobileSelectionPanelGroup:"".concat(k.mobileSelectionPanelGroup," ").concat(k.mobileSelectionPanelGroupRightFill),children:[(0,s.jsx)(W.Z,{size:"small",className:k.mobileSelectionPanel,color:"code"===j?"primary":"default",onClick:()=>O("code"),children:"Code"}),(0,s.jsx)(W.Z,{size:"small",className:k.mobileSelectionPanel,style:{borderLeft:"1px solid #ccc"},onClick:()=>O("console"),children:"I/O"})]})}),!0!==x&&(0,s.jsx)(D.ZP,{title:window.navigator.platform.match(/^Mac/)?"âŒ˜ + return":"ctrl + enter",children:(0,s.jsxs)(W.Z,{size:"small",variant:"contained",color:"secondary",className:"mr10",onClick:e=>m(),disabled:l,children:["Run ",(0,s.jsx)(eg.Z,{})]})}),!0!==v&&(0,s.jsx)(Q.ZP,{variant:"popover",popupId:"more-options-popup-menu",children:e=>(0,s.jsxs)(d.Fragment,{children:[(0,s.jsx)(w.Z,{"aria-label":"more-options",...(0,Q.vW)(e),children:(0,s.jsx)($.Z,{})}),(0,s.jsxs)(H.Z,{...(0,Q.wK)(e),children:[(0,s.jsx)(G.Z,{onClick:()=>{e.close(),t.properties.files.map(e=>h.Z.downloadEditorFile(e.name,e.content))},children:"Download"}),(0,s.jsx)(G.Z,{onClick:()=>{e.close(),b()},children:"Editor Settings"}),!i&&(0,s.jsx)(G.Z,{onClick:()=>{e.close(),y()},children:"Clear Output"}),!i&&(0,s.jsx)(G.Z,{onClick:()=>{e.close(),f()},children:"Title & Visibility"}),!i&&(0,s.jsx)(G.Z,{onClick:()=>{e.close(),window.open("/".concat(t.properties.language,"/wiki"),"_blank")},children:"How To (Wiki)"})]})]})}),C&&(0,s.jsx)(D.ZP,{title:"Full Screen",children:(0,s.jsx)(w.Z,{onClick:()=>C(t),children:Z?(0,s.jsx)(Y.Z,{}):(0,s.jsx)(K.Z,{})})})]})},em=i(4897),ev=i(17694),eb=i(5152),ey=i.n(eb),ef=i(3909),eZ=i(11728),eC=i(41535);let eO=(0,J.Z)(e=>({resultBrowser:{height:"100%"},resultBrowser100vh:{height:"calc(100vh - 105px)"},textInput:{height:"100%",overflow:"auto",display:"flex",flexDirection:"column"},notchedOutline:{borderWidth:"0px",borderColor:"transparent !important"},textOutput:{paddingLeft:e.spacing(1),overflow:"auto",maxHeight:"100%"},resultPaperSuccess:{borderTop:"1.5px solid ".concat(e.palette.success.light," !important")},resultPaperError:{borderTop:"1px solid ".concat(e.palette.error.light," !important")},resizeHandle:{height:5,background:"dark"===e.palette.type?e.palette.alternate.dark:e.palette.grey[100],"&:hover":{background:"dark"===e.palette.type?e.palette.grey[700]:e.palette.grey[300],transition:"background 0.1.5s"}},resizeHandleWithResult:{height:1},textField:{height:"100%","& .MuiInputBase-root":{height:"100%",alignItems:"flex-start"},"& .MuiInputBase-input":{height:"100%",boxSizing:"border-box",padding:e.spacing(1),overflow:"auto"}}}));var ew=e=>{var t,i,l,n,a;let r=eO(),o=(0,em.Z)(),{language:d,running:p,codeObj:h,hideStdin:u,handleInputUpdate:g}=e,j=(0,ev.Z)(o.breakpoints.up("lg"));return(0,s.jsxs)(s.Fragment,{children:[h&&(null===(t=c[null==h?void 0:null===(i=h.properties)||void 0===i?void 0:i.language])||void 0===t?void 0:t.languageType)==="web"&&(0,s.jsx)("div",{id:"resultBrowser",className:e.isMobile?r.resultBrowser100vh:r.resultBrowser,children:(0,s.jsx)(eC.Z,{running:p,codeObj:h,language:d})}),h&&(null===(l=c[null==h?void 0:null===(n=h.properties)||void 0===n?void 0:n.language])||void 0===l?void 0:l.languageType)!=="web"&&(0,s.jsx)("div",{className:e.isMobile?r.resultBrowser100vh:r.resultBrowser,children:(0,s.jsxs)(ef.eh,{direction:"vertical",children:[!0!==u&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(ef.s_,{defaultSize:j?11:20,children:(0,s.jsx)("div",{className:r.textInput,children:(0,s.jsx)(v.Z,{onChange:e=>g(e.target.value),value:(null==h?void 0:null===(a=h.properties)||void 0===a?void 0:a.stdin)||"",label:"STDIN",placeholder:"Input for the program ( Optional )",InputProps:{classes:{notchedOutline:r.notchedOutline}},margin:"normal",variant:"outlined",fullWidth:!0,multiline:!0,InputLabelProps:{shrink:!0},className:r.textField})})})}),(0,s.jsx)(ef.OT,{className:"".concat(r.resizeHandle," ").concat((p||h.properties.result)&&r.resizeHandleWithResult," ")}),(0,s.jsxs)(ef.s_,{children:[p&&(0,s.jsx)(eZ.Z,{}),(0,s.jsxs)("div",{className:"".concat(r.textOutput,"\n                                    ").concat(!p&&h.properties.result&&!0===h.properties.result.success?r.resultPaperSuccess:"","  \n                                    ").concat(!p&&h.properties.result&&!1===h.properties.result.success?r.resultPaperError:"","  "),children:[(0,s.jsx)("p",{children:"Output:"}),(0,s.jsx)("div",{children:(0,s.jsx)("pre",{children:h.properties.result&&h.properties.result.output||"Click on RUN button to see the output"})})]})]})]},j)})]})};let ek=ey()(()=>Promise.all([i.e(4281),i.e(2307),i.e(5102),i.e(7316),i.e(9366)]).then(i.bind(i,20637)),{loadableGenerated:{webpack:()=>[20637]},ssr:!1}),eS=(0,J.Z)(e=>({resizeHandle:{width:5,background:"dark"===e.palette.type?e.palette.alternate.dark:e.palette.grey[100],"&:hover":{background:"dark"===e.palette.type?e.palette.grey[700]:e.palette.grey[300],transition:"background 0.1.5s"}}}));var eT=e=>{let{language:t,running:i,hideStdin:l,codeObj:n,isOwnCode:a,hideResult:r,handleUpdate:o,codeVsConsoleSwitchValue:d,handleRunClick:h,height:u,codeTabIndex:g,disableCopyPaste:j,editorReadOnly:x,readOnlyList:m,handleInputUpdate:v}=e,b=eS(),y=(0,em.Z)(),f=(0,ev.Z)(y.breakpoints.down("xs")),Z=(0,p.v9)(e=>e.user.theme);return(0,s.jsxs)(ef.eh,{autoSaveId:"oc:editor",direction:"horizontal",children:[!(f&&"console"===d)&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(ef.s_,{defaultSize:60,children:n.properties.files.length>g&&(0,s.jsx)(ek,{onRun:()=>{h()},height:u||"100%",value:n.properties.files[g].content,mode:c[n.properties.language].fileVsMode?c[n.properties.language].fileVsMode[n.properties.files[g].name.split(".").pop()]:c[n.properties.language].mode,theme:(null==Z?void 0:Z.startsWith("dark"))?"dark":c[n.properties.language].theme,elevation:0,disableCopyPaste:j,readOnly:x||m&&m.length>0&&m.includes(n.properties.files[g].name),onChange:e=>{let t=[...n.properties.files];t[g].content=e,o(t,a)}})})}),!0!==r&&!(f&&"code"===d)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ef.OT,{className:b.resizeHandle}),(0,s.jsx)(ef.s_,{defaultSize:40,children:(0,s.jsx)(ew,{isMobile:f,language:t,running:i,codeObj:n,hideStdin:l,handleInputUpdate:v})})]})]})},eI=i(86602),eF=i(64710),eP=i(35495),eN=i(72218),eU=e=>{let{codeObj:t,token:i,isOwnCode:l,codeTabIndex:n,handleTabChange:a,handleUpdate:r,hideNewFileOption:o,readOnlyList:d,handleNewCodeId:p,handleAssestsOpen:u,embed:g}=e;return(0,s.jsxs)(ee.Z,{style:{display:"flex",flexDirection:"row"},children:[(0,s.jsx)(eI.Z,{indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",value:n,onChange:(e,t)=>{a(t)},children:t.properties.files.map((e,i)=>(0,s.jsx)(eF.Z,{label:e.name,handleEdit:c[t.properties.language].properties.filesEditable?()=>{let e=prompt("Please enter the new file name",t.properties.files[i].name);if(e){let s=[...t.properties.files];s[i].name=e,r(s,l,!0)}}:null,handleDelete:!o&&c[t.properties.language].properties.newFileOptions&&c[t.properties.language].properties.newFileOptions.length&&!((null==d?void 0:d.length)>0&&d.includes(e.name))?()=>{if(confirm("Do you want to delete file?")){let i=[...t.properties.files];r(i=i.filter(t=>t.name!==e.name),l)}}:null},e.name))}),h.Z.canHaveNewFiles(t)&&!o&&(0,s.jsx)(Q.ZP,{variant:"popover",popupId:"new-file-menu",children:e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.Z,{"aria-label":"more-options-add-file",...(0,Q.vW)(e),children:(0,s.jsx)(eP.Z,{size:"small"})}),(0,s.jsx)(H.Z,{...(0,Q.wK)(e),children:c[t.properties.language].properties.newFileOptions.map(i=>(0,s.jsx)(G.Z,{onClick:()=>{e.close();let s=[...t.properties.files],n=h.Z.createNewFileAndContent(t.properties.files,i);n&&(s.push({...n}),r(s,l,!1,!0))},children:i.helpText},i.helpText))})]})}),h.Z.canHaveImageUpload(t)&&!g&&(0,s.jsx)(w.Z,{"aria-label":"upload-image",onClick:()=>{if(!i){alert("Please login to upload images");return}t._id||p(),u()},children:(0,s.jsx)(eN.Z,{size:"small"})})]})},eL=i(60129),eM=e=>{let{codeObj:t,isOwnCode:i,handleClick:l}=e;return(0,s.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:(0,s.jsxs)(x.Z,{variant:"body1",component:"h1",itemProp:"headline",color:"primary",style:i?{}:{paddingBottom:3,paddingTop:3,lineHeight:1.5},children:[null==t?void 0:t.title,"\xa0",i&&(0,s.jsx)(w.Z,{"aria-label":"Edit",color:"primary",onClick:l,style:{padding:6},children:(0,s.jsx)(eL.Z,{fontSize:"small"})})]})})},eR=i(26561),eE=i(55245),ez=i(51627),eW=i(34896),e_=i(80354),eV=i(38585),eA=i(55523),eB=i(71578);let eD=d.forwardRef(function(e,t){return(0,s.jsx)(g.Z,{direction:"down",ref:t,...e})});var eH=function(e){let{open:t,codeId:i,userId:l,handleClose:n,userToken:a}=e,[r,o]=(0,d.useState)({}),[p,c]=(0,d.useState)([]),[h,g]=(0,d.useState)(!1),[m,v]=(0,d.useState)(!1);(0,d.useEffect)(()=>{b()},[t]);let b=async()=>{if(!t)return;if(!a){g(!0);return}let{statusCode:e,json:i}=await (0,u.vB)("/api/assets/".concat(l),a);200===e?(c(i),g(!0)):alert("Failed to fetch assets")},y=async e=>{if(!window.confirm("Are you sure you want to delete this asset? This action cannot be undone."))return;v(!0);let{statusCode:t,json:i,error:s}=await (0,u.W7)("/api/assets/".concat(l,"/").concat(e),a);v(!1),200===t?(g(!1),b()):alert("Failed to delete asset. Error: "+s)},f=(e,t)=>{navigator.clipboard.writeText(t),o({...r,[e]:!0}),setTimeout(()=>{o({...r,[e]:!1})},1e3)},Z=async(e,t)=>{console.log(e.target.files[0]),e.target.files[0].name;var s=new FormData;s.append("upload_file",e.target.files[0]),v(!0);let{statusCode:n,json:r,error:o}=await (0,u.V_)("/api/assets/upload/".concat(l,"/").concat(i),a,s);v(!1),200===n?(null==r?void 0:r.status)==="success"&&(null==r?void 0:r.url)&&(g(!1),b()):alert("Failed to upload file. Error: "+o)};return(0,s.jsxs)(j.Z,{fullScreen:!0,fullWidth:!0,maxWidth:"xl",open:t,onClose:n,TransitionComponent:eD,children:[(0,s.jsx)(eR.Z,{id:"form-dialog-title",children:"Upload & Manage Images (Beta)"}),(0,s.jsxs)(E.Z,{dividers:!0,children:[(0,s.jsxs)("div",{style:{float:"right"},children:[(0,s.jsx)("input",{accept:"image/*",style:{display:"none"},id:"contained-button-file",type:"file",onChange:e=>Z(e,"image")}),(0,s.jsx)("label",{htmlFor:"contained-button-file",children:(0,s.jsx)(W.Z,{variant:"contained",color:"primary",component:"span",disabled:!l||!i,children:"Upload New"})})]}),!h&&(0,s.jsx)(x.Z,{variant:"h6",children:"Loading..."}),h&&0===p.length&&(0,s.jsx)(x.Z,{variant:"h6",children:"No assets found!"}),h&&p.length>0&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(e_.Z,{style:{marginTop:50,border:"1px solid #dadce0"},children:(0,s.jsxs)(eE.Z,{"aria-label":"simple table",children:[(0,s.jsx)(eV.Z,{children:(0,s.jsxs)(eA.Z,{children:[(0,s.jsx)(eW.Z,{children:"Preview"}),(0,s.jsx)(eW.Z,{children:"URL"}),(0,s.jsx)(eW.Z,{children:"Size"}),(0,s.jsx)(eW.Z,{children:"Actions"})]})}),(0,s.jsx)(ez.Z,{children:p.map((e,t)=>(0,s.jsxs)(eA.Z,{style:{borderTop:"1.5px solid #E0E0E0"},children:[(0,s.jsx)(eW.Z,{children:(0,s.jsx)("img",{src:e.url,style:{width:"auto",maxHeight:"100px"}})}),(0,s.jsx)(eW.Z,{children:e.url}),(0,s.jsxs)(eW.Z,{children:[(e.size/1024).toFixed(2)," KB"]}),(0,s.jsxs)(eW.Z,{children:[(0,s.jsx)(W.Z,{color:"primary",variant:"outlined",size:"small",onClick:()=>f(e._id,e.url),children:r[e._id]?"Copied !":"Copy URL"}),(0,s.jsx)(W.Z,{color:"secondary",variant:"outlined",size:"small",onClick:()=>y(e._id),style:{marginLeft:"5px"},children:"Delete"})]})]},e._id))})]})})}),m&&(0,s.jsx)(eB.Z,{open:m})]}),(0,s.jsx)(z.Z,{children:(0,s.jsx)(D.ZP,{title:"Close","aria-label":"close",children:(0,s.jsx)(W.Z,{onClick:n,color:"primary",variant:"outlined",size:"large",children:"Close"})})})]})};class eG extends d.Component{async componentDidMount(){this.setState({isServer:!1}),this.props.preFill&&!0===this.props.preFill.listenToEvents&&window.addEventListener("message",this.handleEmbedEvent);try{var e;if(this.props.preFill&&this.props.preFill.preloadCodeIds&&this.props.preFill.preloadCodeIds[this.state.codeObj.properties.language]&&!this.state.codeObj._id&&!(null===(e=this.props.preFill.codeObj)||void 0===e?void 0:e._id)){let e=[...this.state.codeObj.properties.files];e[0].content="Loading, Please wait...",this.setState({editorReadOnly:!0,codeObj:{...this.state.codeObj,properties:{...this.state.codeObj.properties,files:e}}});let t=this.props.preFill.preloadCodeIds[this.state.codeObj.properties.language],i=await (0,u.U2)("/api/posts/".concat(t),this.props.userToken);i?(i._id=null,i.user=null,this.props.visibility&&(i.visibility=this.props.visibility),this.setState({codeObj:{...this.state.codeObj,...i},editorReadOnly:!1}),!0===this.props.preFill.listenToEvents&&i.properties&&i.properties.stdin&&window.postMessage({eventType:"populateStdinBack",stdin:i.properties.stdin||""},"*")):this.setState({editorReadOnly:!1})}}catch(e){console.log("Error while preload code",e)}}componentWillUnmount(){window.removeEventListener("message",this.handleEmbedEvent,!1)}handleEmbedEvent(e){if(e.data&&e.data.eventType){if("triggerRun"===e.data.eventType)this.handleOnRunClick();else if("populateCode"===e.data.eventType){if(e.data.language&&e.data.files&&e.data.files.length>0){if(c[e.data.language]){let t=JSON.parse(JSON.stringify(c[e.data.language]));t.visibility=this.props.visibility||this.state.codeObj.visibility||"public",t.properties.files=[...e.data.files],e.data.stdin&&(t.properties.stdin=e.data.stdin),e.data.result&&(t.properties.result=e.data.result),this.setState({codeObj:t})}else console.log("Invalid language "+e.data.language)}else console.log("language & files are mandatory for populateCode event")}else"populateStdin"===e.data.eventType&&this.setState({codeObj:{...this.state.codeObj,properties:{...this.state.codeObj.properties,stdin:e.data.stdin||""}}},()=>{this.props.handleCodeUpdate&&this.props.handleCodeUpdate(this.state.codeObj)})}}isOwnCode(){return!!this.state.codeObj&&(!!this.state.codeObj.user&&!!this.props.loggedInUserObj&&!!this.props.loggedInUserObj._id&&this.state.codeObj.user._id===this.props.loggedInUserObj._id||!!this.state.codeObj.idToken)}render(){var e,t,i,o,d,p,c;let{classes:h}=this.props,u=this.isOwnCode(),g=(0,s.jsx)(eU,{codeObj:this.state.codeObj,isOwnCode:u,codeTabIndex:this.state.codeTabIndex,handleTabChange:e=>this.setState({codeTabIndex:e}),handleUpdate:(e,t,i,s)=>this.handleUpdateCode(e,t,i,s),hideNewFileOption:this.props.preFill.hideNewFileOption,readOnlyList:this.props.preFill.readOnlyList,embed:this.props.embed,token:this.props.token,handleNewCodeId:this.createCodeId,handleAssestsOpen:()=>this.setState({imageUploadModelOpen:!0})}),j=(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(ex,{embed:this.props.embed,codeObj:this.state.codeObj,showAi:null===(e=this.props.preFill)||void 0===e?void 0:e.showAi,hideRun:null===(t=this.props.preFill)||void 0===t?void 0:t.hideRun,hideEditorOptions:null===(i=this.props.preFill)||void 0===i?void 0:i.hideEditorOptions,source:this.props.source,running:this.state.running,codeVsConsoleSwitchValue:this.state.codeVsConsoleSwitchValue,hideNew:null===(o=this.props.preFill)||void 0===o?void 0:o.hideNew,hideLanguageSelection:null===(d=this.props.preFill)||void 0===d?void 0:d.hideLanguageSelection,handleNewClick:e=>this.updateLanguage(e),handleLanguageModelOpen:()=>this.setState({languageSelectionModelOpen:!0}),handleCodeVsConsoleSwitch:e=>this.setState({codeVsConsoleSwitchValue:e}),handleRunClick:this.handleOnRunClick,handleEditorSettingsOpen:()=>this.setState({editorSettingsModelOpen:!0}),handleClearOutput:()=>this.handleClearOutput(),handleCodeMetaEdit:()=>this.setState({editingModelOpen:!0}),fullscreen:this.props.fullscreen,switchFullscreen:this.props.switchFullscreen})});return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(l.Z,{variant:"outlined",children:[this.state.isServer&&(0,s.jsx)(B,{codeObj:this.state.codeObj}),(0,s.jsxs)(n.Z,{children:[(0,s.jsx)(a.Z,{xsDown:!0,implementation:"css",children:(0,s.jsxs)(r.Z,{container:!0,justifyContent:"space-between",alignItems:"center",className:h.editorNav,children:[(0,s.jsxs)(r.Z,{item:!0,children:[" ",g," "]}),(0,s.jsx)(a.Z,{smDown:!0,children:(0,s.jsx)(r.Z,{item:!0,children:!(this.props.preFill&&!0===this.props.preFill.hideTitle)&&(0,s.jsx)(eM,{codeObj:this.state.codeObj,isOwnCode:u,handleClick:this.toggleEditingModel})})}),(0,s.jsxs)(r.Z,{item:!0,children:[" ",j," "]})]})}),(0,s.jsx)(a.Z,{smUp:!0,implementation:"css",children:(0,s.jsxs)(r.Z,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",className:"".concat(h.editorNav," ").concat(h.editorNavMobile," "),children:[(0,s.jsx)(r.Z,{item:!0,xs:12,children:j}),"code"===this.state.codeVsConsoleSwitchValue&&(0,s.jsx)(r.Z,{item:!0,xs:12,children:g})]})}),(0,s.jsx)(eT,{language:this.props.language,running:this.state.running,hideStdin:(null===(p=this.props.preFill)||void 0===p?void 0:p.hideStdin)===!0,codeObj:this.state.codeObj,isOwnCode:u,codeVsConsoleSwitchValue:this.state.codeVsConsoleSwitchValue,handleRunClick:this.handleOnRunClick,height:this.props.height,codeTabIndex:this.state.codeTabIndex,disableCopyPaste:this.props.preFill.disableCopyPaste,editorReadOnly:this.state.editorReadOnly,readOnlyList:this.props.preFill.readOnlyList,handleUpdate:(e,t,i,s)=>this.handleUpdateCode(e,t,i,s),hideResult:null===(c=this.props.preFill)||void 0===c?void 0:c.hideResult,handleInputUpdate:e=>{this.setState({codeObj:{...this.state.codeObj,properties:{...this.state.codeObj.properties,stdin:e}}},()=>{this.props.handleCodeUpdate&&this.props.handleCodeUpdate(this.state.codeObj)})}})]}),(0,s.jsxs)("div",{children:[!this.props.fullscreen&&!this.props.embed&&this.state.codeObj&&this.state.codeObj.updated&&(0,s.jsx)(R,{codeObj:this.state.codeObj}),(0,s.jsx)(U,{source:this.props.source,isUserLoggedIn:!!this.props.token,availableLanguages:this.props.preFill?this.props.preFill.availableLanguages:null,handleListItemClick:e=>{this.setState({language:e,languageSelectionModelOpen:!1},()=>this.updateLanguage(e)),this.props.handleLanguageChange&&this.props.handleLanguageChange(e)},open:this.state.languageSelectionModelOpen,onClose:()=>{this.setState({languageSelectionModelOpen:!1})}}),(0,s.jsx)(eH,{codeId:this.state.codeObj._id,userId:this.props.loggedInUserObj._id,open:this.state.imageUploadModelOpen,handleClose:()=>this.setState({imageUploadModelOpen:!1}),userToken:this.props.token})]}),(0,s.jsx)(C,{open:this.state.editorSettingsModelOpen,onClose:()=>this.setState({editorSettingsModelOpen:!1})}),(0,s.jsx)(A,{open:this.state.editingModelOpen,handleClose:()=>this.setState({editingModelOpen:!1}),codeObj:this.state.codeObj,handleUpdate:(e,t)=>this.handleUpdateCodeMeta(e,t),handleSave:()=>{this.setState({editingModelOpen:!1}),this.handleOnRunClick(!1)},visibility:this.props.visibility,token:this.props.token})]})})}constructor(e){super(e),this.createCodeId=()=>{this.state.creatingCodeId||this.setState({creatingCodeId:!0,codeObj:{...this.state.codeObj,_id:null,title:"forking...",user:null}},()=>{fetch("/api/getIdAndToken").then(e=>e.json()).then(e=>{let t=e.id,i=e.token,s={...this.state.codeObj,_id:t,title:t};this.props.loggedInUserObj&&this.props.loggedInUserObj._id?s.user={_id:this.props.loggedInUserObj._id}:s.idToken=i,this.setState({creatingCodeId:!1,codeObj:s,output:null},()=>{this.props.handleCodeUpdate&&this.props.handleCodeUpdate(this.state.codeObj)})})})},this.handleClearOutput=async()=>{if(this.state.running)return;let e=await (0,u.Wn)("/api/code/clearOutput",this.props.token,{...this.state.codeObj});(null==e?void 0:e.error)?alert(e.error):this.setState({output:null,codeObj:{...this.state.codeObj,properties:{...this.state.codeObj.properties,result:null}}},()=>{this.props.handleCodeUpdate&&this.props.handleCodeUpdate(this.state.codeObj)})},this.handleOnRunClick=async(e,t)=>{if(this.state.running)return;let i=this.isOwnCode();void 0===e&&(e=i),this.props.handleCodeUpdate&&this.props.handleCodeUpdate(this.state.codeObj,"runStart"),this.setState({output:"executing...",running:!0,success:null,codeVsConsoleSwitchValue:"console"});let s=h.Z.clientValidation(this.state.codeObj),l=null;if("failed"===s.status)l={stdout:null,stderr:s.message};else{var n;this.props.handleRunStart&&this.props.handleRunStart(this.state.codeObj);let e=await (0,u.Wn)("/api/code/exec",this.props.token||t,{...this.state.codeObj,visibility:this.props.visibility||this.state.codeObj.visibility||"public",parentURL:null===(n=this.props.preFill)||void 0===n?void 0:n.parentURL});l=e.error?{stdout:null,stderr:e.error}:e.json}let{success:a,output:r}=h.Z.getResult(l);this.setState({success:a,output:r,running:!1,codeObj:{...this.state.codeObj,visibility:l.newVisibility||this.state.codeObj.visibility||"public",properties:{...this.state.codeObj.properties,result:{...this.state.codeObj.properties.result||{},success:a,output:r}}}},()=>{this.props.handleRunComplete&&this.props.handleRunComplete(this.state.codeObj,i)})},this.updateLanguage=async e=>{let t={...JSON.parse(JSON.stringify(c[e]))};if(this.props.preFill&&this.props.preFill.preloadCodeIds&&this.props.preFill.preloadCodeIds[e]){let i=this.props.preFill.preloadCodeIds[e],s=await fetch("/api/posts/".concat(i),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.userToken)}});if(200===s.status){let e=await s.json();(t=e)._id=null,t.user=null,!0===this.props.preFill.listenToEvents&&e&&e.properties&&e.properties.stdin&&window.postMessage({eventType:"populateStdinBack",stdin:e.properties.stdin||""},"*")}else console.log("Missing permissions to preload code! id:"+i)}this.setState({codeTabIndex:0,codeObj:{...t,visibility:this.props.visibility||this.state.codeObj.visibility||"public"}},()=>{this.props.handleNewCodeClick&&this.props.handleNewCodeClick(e)})},this.toggleEditingModel=()=>{this.setState({editingModelOpen:!this.state.editingModelOpen})},this.handleUpdateCode=(e,t,i,s)=>{i||h.Z.updateFileNamesAndContent(e,this.state.codeObj.properties.language);let l=e.length<=this.state.codeTabIndex?this.state.codeTabIndex-1:this.state.codeTabIndex;-1===l&&(l=0),s&&(l=e.length-1),this.setState({codeObj:{...this.state.codeObj,properties:{...this.state.codeObj.properties,files:e}},codeTabIndex:l},()=>{t||this.createCodeId(),this.props.handleCodeUpdate&&this.props.handleCodeUpdate(this.state.codeObj,"codeUpdate")})},this.handleUpdateCodeMeta=(e,t)=>{this.setState({codeObj:{...this.state.codeObj,[e]:t}},()=>{this.props.handleCodeUpdate&&this.props.handleCodeUpdate(this.state.codeObj)})},this.handleTagsUpdate=e=>{if(e){let t=e.split(",").map(e=>e.trim().toLowerCase());this.setState({codeObj:{...this.state.codeObj,tags:t}})}else this.setState({codeObj:{...this.state.codeObj,tags:[]}})},this.handleCodeVsConsoleSwitch=(e,t)=>{this.setState({codeVsConsoleSwitchValue:t})},this.handleEmbedEvent=this.handleEmbedEvent.bind(this);let t=this.props.preFill||{},i=t.language||"java",s=t.codeObj||{...JSON.parse(JSON.stringify(c[i])),language:i,visibility:this.props.visibility||"public"};if(s.properties.result&&"web"!==c[i].languageType){let{success:e,output:t}=h.Z.getResult(s.properties.result);s.properties.result={...s.properties.result,success:e,output:t}}this.state={language:i,codeObj:s,languageSelectionModelOpen:!1,imageUploadModelOpen:!1,output:null,running:!1,editingModelOpen:!1,creatingCodeId:!1,isServer:!0,codeTabIndex:0,editorSettingsModelOpen:!1,editorReadOnly:!1,codeVsConsoleSwitchValue:"code"}}}var eJ=(0,p.$j)(e=>({loggedInUserObj:e.user,token:e.user.token}),{})((0,o.Z)(e=>({editorNav:{background:"dark"===e.palette.type?e.palette.alternate.dark:e.palette.grey[100]},editorNavMobile:{paddingTop:e.spacing(.5)},[e.breakpoints.up("sm")]:{stdout:{borderLeft:"5px solid ".concat("dark"===e.palette.type?e.palette.alternate.dark:e.palette.grey[100])}}}))(eG))},71578:function(e,t,i){var s=i(85893),l=i(58052),n=i(55695),a=i(12332);i(67294);let r=(0,a.Z)(e=>({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}));t.Z=e=>{let t=r();return(0,s.jsx)(l.Z,{className:t.backdrop,open:e.open,children:(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,s.jsx)(n.Z,{color:"inherit"}),(0,s.jsx)("p",{children:e.message||""})]})})}},77433:function(e,t,i){var s=i(85893),l=i(5152),n=i.n(l),a=i(67294),r=i(67259),o=i(2664),d=i(82558),p=i.n(d),c=i(10043),h=i.n(c);let u=n()(()=>i.e(7359).then(i.bind(i,97359)),{loadableGenerated:{webpack:()=>[97359]},ssr:!1});t.Z=e=>{let t=(0,o.v9)(e=>e.user),[i,l]=(0,a.useState)(null),[n,d]=(0,a.useState)(null);return(0,a.useEffect)(()=>{l({code:t=>{var i,l;let n=Array.isArray(t.children)?null===(i=t.children[0])||void 0===i?void 0:i.trim():null===(l=t.children)||void 0===l?void 0:l.trim();return t.inline?(0,s.jsx)("code",{children:n}):(0,s.jsx)(u,{language:t.language||t.className,value:n,disableCopyPaste:e.disableCopyPaste})},a:e=>(0,s.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer nofollow",children:e.children})}),d((null==t?void 0:t.theme)==="dark"?"dark":"light")},[null==t?void 0:t.theme]),(0,s.jsx)(r.D,{className:"md-view oc-theme-".concat(n," ").concat(e.disableCopyPaste?"unselectable":""),remarkPlugins:[h(),p()],components:i||{},children:e.markdown||""})}},39856:function(e,t,i){var s=i(85893),l=i(29187),n=i(39938),a=i(56591);t.Z=e=>{let t="Public (Everyone)",i="Private (Only You)",r="Unlisted (People with the Link)";return e.channelType&&"org"===e.channelType&&(t="Public (Visible outside of org)",i="Private (Visible only for org members)",r="Unlisted (People outside org with the link)"),e.channelType&&"team"===e.channelType&&(t="Public (Visible outside of team)",i="Private (Visible only for team members)",r="Unlisted (People outside team with the link)"),(0,s.jsxs)(l.Z,{variant:e.variant||"outlined",style:{minWidth:e.minWidth||"200"},children:[(0,s.jsx)(n.Z,{htmlFor:"visibility-selector",children:"Visibility"}),(0,s.jsxs)(a.Z,{native:!0,value:e.value,onChange:t=>{e.onChange(t.target.value)},label:"Visibility",inputProps:{name:"visibility",id:"visibility-selector"},children:[(0,s.jsx)("option",{value:"public",children:t}),(0,s.jsx)("option",{value:"private",children:i}),!e.channelType&&(0,s.jsx)("option",{value:"unlisted",children:r})]})]})}}}]);