"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6532],{76532:function(e,t,n){n.d(t,{Z:function(){return ee}});var s=n(85893),o=n(50795),i=n(40553),r=n(6818),a=n(25906),l=n(87111),c=n(10964),d=n(87072),h=n(77563),u=n(59795),p=n(65189),g=n(37159),m=n(68693),x=n(50067),j=n(41852),f=n(94158),y=n(65222),C=n(78481),Z=n(4518),w=n(21207),b=n(68452),v=n(21540),k=n(24599),S=n(18542),O=n(77190),N=n(67294),P=n(2664),T=n(41138),F=n(76474),B=n(61385),L=n(20952),M=n(82169),R=n(53010),E=n(62527),I=n(12332),z=n(90638),A=n(48924),D=n(67743),U=n(36068),_=n(41800),J=n(45614),G=n(51829),V=n(53008),K=n(35071);let W=(0,I.Z)(e=>({drawer:{width:500,maxWidth:"100%"},icon:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText}})),$=(0,v.Z)(e=>({badge:{right:-4,top:5,border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px"}}))(L.Z),Y={org:z.Z,message:A.Z,postPublished:D.Z};var H=e=>{let t=W(),[n,o]=(0,N.useState)(!1),l=(0,P.v9)(e=>e.user.token),c=(0,P.v9)(e=>e.user.orgs),[d,g]=(0,N.useState)([]),[f,y]=(0,N.useState)(!1),[C,w]=(0,N.useState)(0),b=c&&c.length>0?6e4:18e4;async function v(){if(l){let e=await (0,V.U2)("/api/notifications/getNotificationsCount",l);e&&"success"===e.status&&w(e.count)}}async function k(){y(!0);let e=await (0,V.U2)("/api/notifications/getNotifications",l);if(e&&"success"===e.status&&e.results&&e.results.length>0){let t=[];e.results.forEach(e=>t.push({id:e._id,text:e.text,link:e.link,type:e.type})),g([...t])}y(!1)}async function S(e){await T(e.id),o(!1),F.Router.pushRoute(e.link)}v(),(0,V.Yz)(()=>{v()},b);let O=()=>{o(!1)},T=async e=>{await (0,V.v_)("/api/notifications/clearNotification",l,{notificationIds:e}),d.forEach((t,n)=>{t.id===e&&d.splice(n,1)}),g([...d])},B=async()=>{await (0,V.U2)("/api/notifications/clearAllNotifications",l),g([])};return(0,s.jsxs)(x.Z,{children:[(0,s.jsx)(m.ZP,{title:"Notification",children:(0,s.jsx)(h.Z,{color:"primary",onClick:()=>{o(!0),k()},children:(0,s.jsx)($,{badgeContent:C,color:"secondary",children:(0,s.jsx)(U.Z,{fontSize:"small"})})})}),(0,s.jsx)(u.ZP,{anchor:"right",classes:{paper:t.drawer},ModalProps:{BackdropProps:{invisible:!0}},onClose:O,open:n,variant:"temporary",children:(0,s.jsxs)(p.Z,{p:3,children:[(0,s.jsxs)(p.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,s.jsxs)(M.Z,{variant:"h4",color:"textPrimary",children:["Notifications"," ",d&&d.length>0?"".concat(d.length):""]}),(0,s.jsx)(h.Z,{onClick:O,children:(0,s.jsx)(_.Z,{})})]}),f&&(0,s.jsx)(K.Z,{}),!f&&0===d.length&&(0,s.jsx)(p.Z,{p:2,children:(0,s.jsx)(M.Z,{variant:"h6",color:"textPrimary",children:"There are no new notifications!"})}),d.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Z,{p:1,display:"flex",justifyContent:"center",children:(0,s.jsx)(j.Z,{onClick:()=>B(),endIcon:(0,s.jsx)(J.Z,{}),children:"Clear All"})}),(0,s.jsx)(a.Z,{dense:!0,className:t.list,disablePadding:!0,children:d.map(e=>{let n=Y[e.type];return(0,s.jsxs)(i.Z,{onClick:()=>S(e),dense:!0,divider:!0,style:{cursor:"pointer"},children:[(0,s.jsx)(R.Z,{children:(0,s.jsx)(Z.Z,{className:t.icon,children:(0,s.jsx)(n,{fontSize:"small"})})}),(0,s.jsx)(r.Z,{primary:e.text,primaryTypographyProps:{variant:"subtitle2",color:"textPrimary"}}),(0,s.jsx)(E.Z,{className:"hide",onClick:()=>T(e.id),children:(0,s.jsx)(h.Z,{edge:"end","aria-label":"delete",children:(0,s.jsx)(G.Z,{fontSize:"small"})})})]},e.id)})})]})]})})]})};let q=N.forwardRef(function(e,t){return(0,s.jsx)(o.Z,{direction:"down",ref:t,...e})}),Q={"":"Home",html:"Editor",challenges:"Challenges",orgs:"Orgs",cheatsheets:"Cheatsheets",tutorials:"Tutorials",search:"Search",users:"Users"};class X extends N.Component{componentDidMount(){this.loadCountryCode()}render(){let{classes:e}=this.props,t=Object.entries(Q).map(t=>{let[n,o]=t;return(0,s.jsx)(F.Link,{route:"/".concat(n),children:(0,s.jsx)("span",{className:e.links,children:(0,s.jsx)(i.Z,{button:!0,children:(0,s.jsx)(r.Z,{primary:o})})})},n)}),n=(0,s.jsxs)("div",{className:e.list,children:[(0,s.jsx)(a.Z,{children:t}),(0,s.jsx)(l.Z,{}),this.props.userObj&&this.props.userObj.userLoggedIn&&this.props.userObj.orgs&&this.props.userObj.orgs.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Z,{children:this.props.userObj.orgs.map(t=>(0,s.jsx)(F.Link,{route:"/orgs/".concat(t._id,"/").concat(t.link),children:(0,s.jsx)("span",{className:e.links,children:(0,s.jsx)(i.Z,{button:!0,children:(0,s.jsx)(r.Z,{primary:t.title})})})},t._id))}),(0,s.jsx)(l.Z,{})]}),(0,s.jsx)(a.Z,{children:this.props.userObj&&this.props.userObj.userLoggedIn?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{button:!0,onClick:this.handleProfileClick,children:(0,s.jsx)(r.Z,{primary:"My Account"})}),(0,s.jsx)(i.Z,{button:!0,onClick:this.handleNotificationsClick,children:(0,s.jsx)(r.Z,{primary:"Notifications"})}),(0,s.jsx)(i.Z,{button:!0,onClick:this.handleLogout,children:(0,s.jsx)(r.Z,{primary:"Logout"})})]}):(0,s.jsx)(i.Z,{button:!0,children:(0,s.jsx)(r.Z,{primary:"Login",onClick:e=>this.setState({loginModelOpen:!0})})})})]});return(0,s.jsxs)(N.Fragment,{children:[(0,s.jsx)(c.Z,{position:this.props.position||"static",elevation:0,color:"inherit",className:e[this.props.position]||e.root,children:(0,s.jsxs)(d.Z,{className:e.toolbar,variant:"dense",children:[(0,s.jsx)(h.Z,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"Menu",onClick:()=>this.setState({drawerOpen:!0}),children:(0,s.jsx)(S.Z,{})}),(0,s.jsx)(u.ZP,{open:this.state.drawerOpen,onClose:()=>this.setState({drawerOpen:!1}),children:(0,s.jsx)("div",{tabIndex:0,role:"button",onClick:()=>this.setState({drawerOpen:!1}),onKeyDown:()=>this.setState({drawerOpen:!1}),children:n})}),(0,s.jsx)(F.Link,{route:"/",children:(0,s.jsx)(p.Z,{className:e.logoParent,children:(0,s.jsx)(p.Z,{className:e.logo})})}),(0,s.jsx)("span",{className:e.grow}),(0,s.jsx)(g.Z,{xsDown:!0,children:(0,s.jsx)(m.ZP,{title:"Search",children:(0,s.jsx)(h.Z,{"aria-label":"search",onClick:()=>F.Router.pushRoute("/search"),children:(0,s.jsx)(O.Z,{color:"primary",fontSize:"small"})})})}),(0,s.jsx)(m.ZP,{title:"Toggle DarkMode",children:(0,s.jsx)(h.Z,{"aria-label":"dark mode",onClick:e=>this.props.userThemeChange(this.props.userObj&&"dark"===this.props.userObj.theme?"light":"dark"),children:(0,s.jsx)(k.Z,{color:"primary",fontSize:"small"})})}),this.props.userObj&&this.props.userObj.userLoggedIn&&(0,s.jsx)(g.Z,{xsDown:!0,children:(0,s.jsx)(x.Z,{children:(0,s.jsx)(H,{})})}),(0,s.jsxs)(g.Z,{only:["xs","sm"],children:[(0,s.jsx)(F.Link,{prefetch:!1,route:"/html",children:(0,s.jsx)(j.Z,{className:e.navBarButtons,color:"primary",children:"Editor"})}),(0,s.jsx)(F.Link,{prefetch:!1,route:"/challenges",children:(0,s.jsx)(j.Z,{className:e.navBarButtons,color:"primary",children:"Challenges"})}),(0,s.jsx)(F.Link,{prefetch:!1,route:"/orgs",children:(0,s.jsx)("span",{className:"textDecorationNone",children:(0,s.jsx)(j.Z,{className:e.navBarButtons,color:"primary",children:"Orgs"})})}),(0,s.jsx)(j.Z,{className:e.navBarButtons,color:"primary","aria-owns":this.state.anchorElMore?"more-nav-menu":void 0,"aria-haspopup":"true",onClick:this.handleClickMore,children:"Company & More"}),(0,s.jsx)(f.Z,{id:"more-nav-menu",anchorEl:this.state.anchorElMore,open:!!this.state.anchorElMore,onClose:this.handleCloseMore,anchorOrigin:{vertical:"bottom",horizontal:"center"},getContentAnchorEl:null,children:(0,s.jsxs)(y.Z,{container:!0,style:{minWidth:400},children:[(0,s.jsxs)(y.Z,{item:!0,xs:6,children:[(0,s.jsx)(C.Z,{onClick:()=>{this.handleCloseMore(),F.Router.pushRoute("/about")},children:"About"}),(0,s.jsx)(C.Z,{onClick:()=>{this.handleCloseMore(),F.Router.pushRoute("/contact")},children:"Contact"}),(0,s.jsx)(C.Z,{onClick:()=>{this.handleCloseMore(),F.Router.pushRoute("/customer-use-cases")},children:"Customer Use Cases"}),(0,s.jsx)(C.Z,{onClick:()=>{this.handleCloseMore(),F.Router.pushRoute("/apis/pricing")},children:"Pricing"})]}),(0,s.jsxs)(y.Z,{item:!0,xs:6,children:[(0,s.jsx)(C.Z,{onClick:()=>{this.handleCloseMore(),F.Router.pushRoute("/cheatsheets")},children:"Cheatsheets"}),(0,s.jsx)(C.Z,{onClick:()=>{this.handleCloseMore(),F.Router.pushRoute("/tutorials")},children:"Tutorials"}),(0,s.jsx)(C.Z,{onClick:()=>{this.handleCloseMore(),F.Router.pushRoute("/wiki")},children:"Wiki"}),(0,s.jsx)(C.Z,{onClick:()=>{this.handleCloseMore(),F.Router.pushRoute("/apis")},children:"APIs"})]})]})}),(0,s.jsx)("span",{className:e.verticalDevider}),this.props.userObj&&this.props.userObj.userLoggedIn?(0,s.jsx)(Z.Z,{alt:"",src:this.props.userObj.thumbnail,className:e.avatar,"aria-owns":this.state.anchorEl?"simple-menu":void 0,"aria-haspopup":"true",onClick:this.handleClick}):(0,s.jsx)(j.Z,{className:e.navBarButtons,onClick:e=>this.setState({loginModelOpen:!0}),children:"Login"}),(0,s.jsxs)(f.Z,{id:"simple-menu",anchorEl:this.state.anchorEl,open:!!this.state.anchorEl,onClose:this.handleClose,children:[(0,s.jsx)(C.Z,{onClick:this.handleProfileClick,children:"My account"}),(0,s.jsx)(C.Z,{onClick:this.handleLogout,children:"Logout"}),(0,s.jsx)(l.Z,{}),this.props.userObj.orgs&&this.props.userObj.orgs.map(t=>(0,s.jsx)(F.Link,{route:"/orgs/".concat(t._id,"/").concat(t.link),children:(0,s.jsx)("span",{className:e.links,children:(0,s.jsx)(C.Z,{children:t.title})})},t._id))]})]})]})}),(0,s.jsx)(l.Z,{}),!this.props.disableBottomMargin&&(0,s.jsx)("div",{className:e.navbarDivider}),(0,s.jsx)(w.Z,{open:this.state.loginModelOpen,TransitionComponent:q,keepMounted:this.props.keepMounted||!1,onClose:e=>this.setState({loginModelOpen:!1}),children:(0,s.jsx)(b.Z,{className:e.loginContent,children:(0,s.jsx)(B.Z,{onComplete:e=>{this.setState({loginModelOpen:!1})}})})})]})}constructor(...e){super(...e),this.state={anchorEl:null,anchorElMore:null,searchModelOpen:!1,drawerOpen:!1,loginModelOpen:!1,formStateSignIn:!0,name:"",email:"",password:"",searchString:""},this.handleClick=e=>{this.setState({anchorEl:e.currentTarget}),this.props.refreshUserDetails(this.props.userObj.token)},this.handleClose=()=>{this.setState({anchorEl:null})},this.handleClickMore=e=>{this.setState({anchorElMore:e.currentTarget})},this.handleCloseMore=()=>{this.setState({anchorElMore:null})},this.handleProfileClick=()=>{F.Router.pushRoute("/users/".concat(this.props.userObj._id)),this.handleClose()},this.handleNotificationsClick=()=>{F.Router.pushRoute("/notifications"),this.handleClose()},this.handleLogout=()=>{this.props.userLogout(),this.handleClose()},this.handleFailedResponse=async e=>{console.log("handleFailedResponse",e),alert("Sorry, Something went wrong.")},this.loadCountryCode=async()=>{var e;let t=(null===(e=this.props.userObj)||void 0===e?void 0:e.plan)==="enterprise",{json:n,statusCode:s}=await (0,V.vB)("/api/country",t?this.props.userObj.token:null);200===s&&n.countryCode&&this.props.userCountryCodeChange(n.countryCode)}}}var ee=(0,P.$j)(e=>({userObj:e.user}),{userLogin:T.n$,userLogout:T.Kv,refreshUserDetails:T.Bw,userThemeChange:T.e5,userCountryCodeChange:T.VM})((0,v.Z)(e=>({root:{},fixed:{borderBottom:"1px solid #d3d7da",zIndex:e.zIndex.drawer+1},navAppBar:{background:"#ffffff"},avatar:{cursor:"pointer",border:"1px solid #c1c1c1"},grow:{flexGrow:1},logoParent:{paddingLeft:"5px",paddingRight:"10px",paddingTop:"1px"},logo:{backgroundImage:"light"===e.palette.type?"url(".concat("https://static.onecompiler.com/images/logo/oc_logo_v4_light.svg",")"):"url(".concat("https://static.onecompiler.com/images/logo/oc_logo_v4_dark.svg",")"),backgroundRepeat:"no-repeat",backgroundSize:"auto",backgroundPosition:"center",height:"27px",width:"180px",cursor:"pointer"},logoIcon:{width:e.spacing(6),height:e.spacing(6)},verticalDevider:{marginRight:"18px;",marginLeft:"18px;",paddingBottom:"10px;",fontSize:"30px;",borderRight:"1px solid #464748",height:40},navbarDivider:{marginBottom:30},[e.breakpoints.down("sm")]:{navbarDivider:{marginBottom:10}},menuButton:{marginLeft:-8,marginRight:8,color:"light"===e.palette.type?"rgba(0, 0, 0, 0.54)":"#ffffff"},toolbar:{},list:{width:250},search:{paddingTop:e.spacing(.5),cursor:"pointer","&:hover":{backgroundColor:"#ebecf1",borderRadius:"50%"}},loginContent:{display:"flex",flexDirection:"column",alignItems:"center"},links:{textDecoration:"none",color:e.palette.text.primary}}))(X))},35071:function(e,t,n){var s=n(85893),o=n(12332),i=n(58365);n(67294);let r=(0,o.Z)(e=>({root:{padding:e.spacing(4)}}));t.Z=()=>{let e=r();return(0,s.jsxs)("div",{className:e.root,children:[(0,s.jsx)(i.Z,{}),(0,s.jsx)(i.Z,{}),(0,s.jsx)(i.Z,{}),(0,s.jsx)("br",{}),(0,s.jsx)(i.Z,{}),(0,s.jsx)(i.Z,{}),(0,s.jsx)(i.Z,{})]})}},53008:function(e,t,n){n.d(t,{ID:function(){return k},IV:function(){return b},Ox:function(){return g},Sv:function(){return w},U2:function(){return Z},V_:function(){return f},W7:function(){return j},Wn:function(){return x},Yz:function(){return O},gz:function(){return C},kO:function(){return S},vB:function(){return y},v_:function(){return m},ws:function(){return v}});var s=n(85893),o=n(84816),i=n(77563),r=n(65222),a=n(82169),l=n(14327),c=n(60280),d=n(33729),h=n.n(d),u=n(67294),p=n(76474);async function g(){let e=await fetch("/api/getId");return(await e.json()).id}async function m(e,t,n){let s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(n)});return await s.json()}async function x(e,t,n){let s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(n)}),o=s.status;return o<400?{statusCode:o,json:await s.json()}:{statusCode:o,error:await s.text()}}async function j(e,t,n){let s=await fetch(e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(n||{})}),o=s.status;return o<400?{statusCode:o,json:await s.json()}:{statusCode:o,error:await s.text()}}async function f(e,t,n){let s=await fetch(e,{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:n}),o=s.status;return o<400?{statusCode:o,json:await s.json()}:{statusCode:o,error:await s.text()}}async function y(e,t,n){let s=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}),o=s.status;return o<400?{statusCode:o,json:await s.json()}:{statusCode:o,error:await s.text()}}async function C(e,t,n){let s=await fetch(e,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(n)});return await s.json()}async function Z(e,t){let n=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});return await n.json()}async function w(e,t,n){let s=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}),o=await s.blob();h()(o,n)}async function b(e,t,n){let s=await fetch(e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(n)});return await s.json()}async function v(e,t,n){let s=new FormData;s.append("file",n);let o=await fetch(e,{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:s});return await o.json()}function k(e){let{toggleMessage:t,snakbarOpen:n,setSnakbarOpen:r}=e.data;return(0,s.jsx)(o.Z,{anchorOrigin:{vertical:"top",horizontal:"right"},open:n,autoHideDuration:6e3,onClose:()=>r(!1),message:(0,s.jsx)("span",{id:"message-id",children:t}),action:[(0,s.jsx)(i.Z,{"aria-label":"Close",color:"inherit",onClick:()=>r(!1),children:(0,s.jsx)(l.Z,{})},"close")]})}function S(e){let{count:t,id:n}=e;return(0,s.jsx)(r.Z,{item:!0,children:(0,s.jsx)(p.Link,{route:"/stats/".concat(n),children:(0,s.jsxs)(r.Z,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",style:{cursor:"pointer"},children:[(0,s.jsxs)(r.Z,{item:!0,children:[" ",(0,s.jsx)(c.Z,{color:"primary"})," "]}),!e.hideCount&&(0,s.jsxs)(r.Z,{item:!0,children:[" ",(0,s.jsxs)(a.Z,{variant:"body2",gutterBottom:!0,children:[" ","".concat(t||0)," "]})," "]})]})})})}function O(e,t){let n=(0,u.useRef)();(0,u.useEffect)(()=>{n.current=e},[e]),(0,u.useEffect)(()=>{if(null!==t){let e=setInterval(function(){n.current()},t);return()=>clearInterval(e)}},[t])}},61385:function(e,t,n){n.d(t,{Z:function(){return k}});var s=n(85893),o=n(85700),i=n(4518),r=n(41852),a=n(65222),l=n(84816),c=n(12332),d=n(82169),h=n(6488),u=n(67294),p=n(2664),g=n(41138),m=n(59015),x=n.n(m),j=n(89956);class f extends u.Component{render(){return(0,s.jsx)(j.FacebookLoginButton,{onClick:this.props.triggerLogin,...this.props,children:this.props.children})}}x()(f);class y extends u.Component{render(){return(0,s.jsx)(j.GoogleLoginButton,{onClick:this.props.triggerLogin,...this.props,children:this.props.children})}}var C=x()(y),Z=n(63318),w=n.n(Z),b=e=>{let{setReCaptchaValue:t,getTurnstileRef:n}=e,o=(0,Z.useTurnstile)();return(0,s.jsx)(w(),{theme:"light",sitekey:"0x4AAAAAAA1nNhOurnK73x78",onVerify:e=>{t(e),n&&n(o)}})};let v=(0,c.Z)(e=>({root:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1),display:"flex",flexDirection:"column",alignItems:"center"},socialLogins:{paddingTop:e.spacing(4)},loginForm:{width:"100%",paddingTop:e.spacing(6),minWidth:e.spacing(40)},loginFormField:{width:e.spacing(38),margin:e.spacing(1)},signUp:{textDecoration:"underline",cursor:"pointer"}}));var k=e=>{let t=v();(0,p.v9)(e=>e.user.userLoggedIn);let n=(0,p.I0)(),[c,m]=(0,u.useState)(e.hideMoreOptions||!1),[x,j]=(0,u.useState)(""),[f,y]=(0,u.useState)(""),[Z,w]=(0,u.useState)(""),[k,S]=(0,u.useState)(""),[O,N]=(0,u.useState)(null),[P,T]=(0,u.useState)("login"),[F,B]=(0,u.useState)(null),[L,M]=(0,u.useState)(!1),[R,E]=(0,u.useState)(!1),[I,z]=(0,u.useState)(!1),[A,D]=(0,u.useState)(!1),[U,_]=(0,u.useState)(null),[J,G]=(0,u.useState)(null);(0,u.useEffect)(()=>{N(window.self!==window.top)},[]);let V=(e,t)=>{"clickaway"!==t&&B(null)},K=t=>async s=>{let o=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:t,data:s})}),i=await o.json();"success"===i.status?(n((0,g.n$)(i)),e.onComplete({status:"success",data:i})):alert(i.message)},W=async()=>{if(!x||!f||!Z){alert("Please fill all fields");return}if(!f.includes("@")||!f.includes(".")){alert("Please enter a valid email");return}if(Z.length<8||Z.length>32){alert("Password should be between 8 to 32 characters");return}if(x.length<3||x.length>32){alert("Name should be between 3 to 32 characters");return}if(f.length>128){alert("Email should be less than 128 characters");return}let e=await fetch("/api/users/email/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x.trim(),email:f.trim(),password:Z.trim(),reCapchaValue:U})}),t=await e.json();"success"===t.status?(T("otpSent"),_(null),null==J||J.reset()):alert(t.message)},$=async()=>{let t=await fetch("/api/users/email/signup/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f.trim(),otp:k,reCapchaValue:U})}),s=await t.json();if("success"===s.status){let t=s.user;n((0,g.n$)(t)),e.onComplete({status:"success",data:t})}else _(null),null==J||J.reset(),alert(s.message)},Y=async()=>{let e=await fetch("/api/users/email/forgotPassword",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f.trim(),reCapchaValue:U})}),t=await e.json();"success"!==t.status?alert(t.message):(T("forgotPasswordOtpSent"),_(null))},H=async()=>{let e=await fetch("/api/users/email/forgotPassword/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f.trim(),otp:k,password:Z,reCapchaValue:U})}),t=await e.json();"success"===t.status?(alert("Password reset successful, please login with new password"),T("login")):(_(null),null==J||J.reset(),alert(t.message))};return null===O?(0,s.jsx)("div",{children:"Loading..."}):O?(0,s.jsx)(d.Z,{variant:"body1",gutterBottom:!0,color:"textSecondary",children:"Failed to load login options, please try again."}):(0,s.jsxs)("div",{className:t.root,children:[(0,s.jsx)(i.Z,{variant:"rounded",src:"https://static.onecompiler.com/images/logo/logo_icon_small.png",className:t.logoIcon}),["signUp","login","otpSent"].includes(P)&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:t.socialLogins,children:[c&&(0,s.jsxs)("div",{children:[(0,s.jsx)(d.Z,{variant:"subtitle1",gutterBottom:!0,color:"textSecondary",children:"Creating an account with onecompiler.com gets you additional benifites & it does not take more than couple of seconds."}),(0,s.jsx)("br",{}),(0,s.jsx)(d.Z,{variant:"subtitle1",gutterBottom:!0,color:"textSecondary",children:"1. You can check all your programs history"}),(0,s.jsx)(d.Z,{variant:"subtitle1",gutterBottom:!0,color:"textSecondary",children:"2. You can write private programs which only you can see"})]}),(0,s.jsx)(a.Z,{container:!0,direction:c?"row":"column",justifyContent:"center",alignItems:"stretch",children:(0,s.jsx)(a.Z,{item:!0,style:{flexGrow:1},children:(0,s.jsx)(C,{provider:"google",appId:"748546363-11lp66se7cl6samfubad3dlsjnau8t11.apps.googleusercontent.com",onLoginSuccess:K("google"),onLoginFailure:async e=>{console.log("login error",e),e&&e.message?"string"==typeof e.message&&e.message.includes("Cookies are not enabled")?B("Cookies are not enabled in your browser, Google login may not work."):B("Error with google login: "+e.message):e&&"string"==typeof e&&e.includes("SDK not loaded")?B("SDK still loading, please try again in few seconds"):B("Error with google login: "+e)}})})})]}),c&&(0,s.jsx)(a.Z,{container:!0,direction:c?"row":"column",justifyContent:"center",alignItems:"center",children:(0,s.jsx)(r.Z,{color:"primary",onClick:()=>m(!1),endIcon:(0,s.jsx)(h.Z,{}),children:"More login options"})}),!c&&(0,s.jsx)("form",{noValidate:!0,autoComplete:"off",children:(0,s.jsxs)(a.Z,{className:t.loginForm,container:!0,direction:"column",justifyContent:"flex-start",alignItems:"center",children:[(0,s.jsx)(d.Z,{variant:"body1",gutterBottom:!0,children:"signUp"===P?"Create new account.":"or login with email & password"}),P&&"signUp"===P&&(0,s.jsx)(o.Z,{id:"name",label:"Name",variant:"outlined",size:"small",className:t.loginFormField,value:x,onChange:e=>j(e.target.value)}),(0,s.jsx)(o.Z,{id:"email",label:"Email",variant:"outlined",size:"small",className:t.loginFormField,value:f,onChange:e=>y(e.target.value?e.target.value.toLowerCase():"")}),(0,s.jsx)(o.Z,{id:"password",label:"Password",type:"password",variant:"outlined",size:"small",className:t.loginFormField,value:Z,onChange:e=>w(e.target.value)}),P&&"otpSent"===P&&(0,s.jsx)(o.Z,{id:"otp",label:"OTP (you receive on email)",variant:"outlined",size:"small",className:t.loginFormField,value:k,onChange:e=>S(e.target.value)}),"login"===P&&(0,s.jsx)(r.Z,{variant:"contained",color:"primary",className:t.loginFormField,onClick:()=>{K("onecompiler")({email:f,password:Z})},children:"Login"}),("signUp"===P||"otpSent"===P)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{style:{paddingTop:12},children:(0,s.jsx)(b,{setReCaptchaValue:_,getTurnstileRef:e=>G(e)},P)}),P&&"signUp"===P&&(0,s.jsx)(r.Z,{disabled:!U,variant:"contained",color:"primary",className:t.loginFormField,onClick:()=>W(),children:"Sign Up"}),P&&"otpSent"===P&&(0,s.jsx)(r.Z,{disabled:!U,variant:"contained",color:"primary",className:t.loginFormField,onClick:()=>$(),children:"Finish Sign Up"})]}),"login"===P&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.Z,{variant:"body2",gutterBottom:!0,children:["New to OneCompiler? ",(0,s.jsx)("span",{className:t.signUp,onClick:()=>T("signUp"),children:"Sign Up"})]}),(0,s.jsx)(d.Z,{variant:"body2",gutterBottom:!0,children:(0,s.jsx)("span",{className:t.signUp,onClick:()=>T("forgotPassword"),children:"Forgot password?"})})]}),"signUp"===P&&(0,s.jsxs)(d.Z,{variant:"body2",gutterBottom:!0,children:["Already signed up? ",(0,s.jsx)("span",{className:t.signUp,onClick:()=>T("login"),children:"Login"})]})]})})]}),["forgotPassword","forgotPasswordOtpSent"].includes(P)&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(a.Z,{className:t.loginForm,container:!0,direction:"column",justifyContent:"flex-start",alignItems:"center",children:[(0,s.jsx)(d.Z,{variant:"body1",gutterBottom:!0,className:t.loginFormField,children:"forgotPasswordOtpSent"===P?"Please check your email for the OTP, and create your new password.":"Please enter your registered email, we will send you the reset instructions."}),(0,s.jsx)(o.Z,{id:"email",label:"Email",variant:"outlined",size:"small",className:t.loginFormField,value:f,onChange:e=>y(e.target.value?e.target.value.toLowerCase():"")}),"forgotPasswordOtpSent"===P&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{id:"forgotPasswordOtpSent",label:"OTP (you receive on email)",variant:"outlined",size:"small",className:t.loginFormField,value:k,onChange:e=>S(e.target.value)}),(0,s.jsx)(o.Z,{id:"newPassword",label:"New Password",type:"password",variant:"outlined",size:"small",className:t.loginFormField,value:Z,onChange:e=>w(e.target.value)})]}),(0,s.jsx)("div",{style:{paddingTop:12},children:(0,s.jsx)(b,{setReCaptchaValue:_,getTurnstileRef:e=>G(e)},P)}),"forgotPassword"===P&&(0,s.jsx)(r.Z,{disabled:!U,variant:"contained",color:"primary",className:t.loginFormField,onClick:()=>{Y()},children:"Continue"}),"forgotPasswordOtpSent"===P&&(0,s.jsx)(r.Z,{disabled:!U,variant:"contained",color:"primary",className:t.loginFormField,onClick:()=>{H()},children:"Reset Password"}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]})}),(0,s.jsx)(l.Z,{anchorOrigin:{vertical:"top",horizontal:"right"},open:null!==F,autoHideDuration:6e3,onClose:V,message:F,action:(0,s.jsx)(r.Z,{color:"secondary",size:"small",onClick:V,children:"Okay"})})]})}},41138:function(e,t,n){n.d(t,{Ab:function(){return i},Bw:function(){return c},Fl:function(){return r},Kv:function(){return d},VM:function(){return a},e5:function(){return o},n$:function(){return l}});var s=n(87404);let o=(e,t)=>(n,o)=>{if(n({type:s.n_,payload:e}),!t){let e=o();localStorage.setItem("reduxState",JSON.stringify({...e}))}},i=(e,t)=>(n,o)=>{if(n({type:s.Lc,payload:+e}),!t){let e=o();localStorage.setItem("reduxState",JSON.stringify({...e}))}},r=(e,t)=>(n,o)=>{if(n({type:s.sI,payload:!!e}),!t){let e=o();localStorage.setItem("reduxState",JSON.stringify({...e}))}},a=(e,t)=>(n,o)=>{if(n({type:s.TG,payload:e}),!t){let e=o();localStorage.setItem("reduxState",JSON.stringify({...e}))}},l=(e,t)=>(n,o)=>{if(n({type:s.bc,payload:e}),!t){let e=o();localStorage.setItem("reduxState",JSON.stringify({...e}))}},c=e=>t=>{e?fetch("/api/users/me",{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>e.json()).then(e=>{e.plan||(e.plan=null),t(l(e))}):console.log("unable to refresh")},d=()=>e=>{e({type:s.lK,payload:{}}),localStorage.removeItem("reduxState")}}}]);